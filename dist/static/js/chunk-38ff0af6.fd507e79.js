(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38ff0af6"],{"287d":function(e,t,a){},"90fe":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("filterPanel",{attrs:{"handle-filter":e.handleFilter}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"table",attrs:{height:"tableHeight",data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"id",property:"id",width:"50"}}),a("el-table-column",{attrs:{label:"名",prop:"givenName",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("strong",[e._v(e._s(t.row.givenName))])]}}])}),a("el-table-column",{attrs:{label:"代",prop:"generation",width:"60",sortable:""}}),a("el-table-column",{attrs:{label:"生卒",prop:"bad",width:"100",sortable:""}}),a("el-table-column",{attrs:{label:"妻",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.wives,size:"small"}},[a("el-table-column",{attrs:{property:"fullName",label:"姓名"}}),a("el-table-column",{attrs:{property:"from",label:"来自"}}),a("el-table-column",{attrs:{property:"memo",label:"备注"}})],1),a("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(t.row.wives.length?"查看":""))])],1)]}}])}),a("el-table-column",{attrs:{label:"女",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.daughters,size:"small"}},[a("el-table-column",{attrs:{property:"givenName",label:"名"}}),a("el-table-column",{attrs:{property:"married",label:"嫁与"}}),a("el-table-column",{attrs:{property:"memo",label:"备注"}})],1),a("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(t.row.wives.length?"查看":""))])],1)]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"memo"}}),a("el-table-column",{attrs:{label:"创建时间",width:"160",prop:"createdAt",sortable:""}}),a("el-table-column",{attrs:{label:"更新时间",width:"160",prop:"updatedAt",sortable:""}}),a("el-table-column",{attrs:{label:"操作",width:"162",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return e.handleCreate(t.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.row.id)}}}),a("el-button",{attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row.id)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.page.page,"page-sizes":[50,100,200],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],l=a("5530"),i=a("ad8f"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名"}},[a("el-input",{attrs:{placeholder:"请输入要搜索的名字",clearable:""},on:{change:e.handleChange},model:{value:e.givenName,callback:function(t){e.givenName=t},expression:"givenName"}})],1),a("el-form-item",{attrs:{label:"代"}},[a("el-select",{attrs:{placeholder:"辈分(代)筛选",clearable:""},on:{change:e.handleChange},model:{value:e.generation,callback:function(t){e.generation=t},expression:"generation"}},e._l(15,(function(e){return a("el-option",{key:e,attrs:{label:e+16,value:e+16}})})),1)],1)],1)},s=[],c={name:"FilterPanel",props:{handleFilter:{type:Function,required:!0}},data:function(){return{givenName:"",generation:""}},methods:{handleChange:function(e){var t={};this.givenName&&(t.givenName=this.givenName),this.generation&&(t.generation=this.generation),this.handleFilter(t)}}},u=c,d=a("2877"),h=Object(d["a"])(u,o,s,!1,null,"da8bcdc2",null),p=h.exports,f={components:{FilterPanel:p},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{list:null,listLoading:!0,total:0,order:null,tableHeight:window.innerHeight-200,params:{},page:{pageSize:50,page:1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(i["c"])(Object(l["a"])(Object(l["a"])({},this.page),{},{order:this.order},this.params)).then((function(t){e.list=t.result.rows,e.total=t.result.count,e.listLoading=!1}))},handleEdit:function(e){this.$router.push({path:"/admin/edit",query:{id:e}})},handleCreate:function(e){var t=e.id,a=e.generation,n=e.givenName;this.$router.push({path:"/admin/edit",query:{parentId:t,generation:a,givenName:n}})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteItem(e)})).catch((function(){}))},deleteItem:function(e){var t=this;Object(i["e"])({id:e}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.refreshList()}))},refreshList:function(){this.fetchData()},handleSortChange:function(e){var t=e.prop,a=e.order;this.order=a?[t,a]:null,this.fetchData()},handleFilter:function(e){this.params=e,this.page.page=1,this.fetchData()},handleSizeChange:function(e){this.page=Object(l["a"])(Object(l["a"])({},this.page),{},{pageSize:e}),this.refreshList()},handleCurrentChange:function(e){this.page=Object(l["a"])(Object(l["a"])({},this.page),{},{page:e}),this.refreshList()}}},g=f,m=(a("a489"),Object(d["a"])(g,n,r,!1,null,"86bf0856",null));t["default"]=m.exports},a489:function(e,t,a){"use strict";a("287d")},ad8f:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c}));var n=a("b775");function r(e){return Object(n["a"])({url:"/list/get",method:"post",data:e})}function l(){return Object(n["a"])({url:"/list/getTree",method:"post"})}function i(e){return Object(n["a"])({url:"/item/remove",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/item/get",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/item/create",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/item/update",method:"post",data:e})}}}]);