(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27d5079e"],{"371d":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",staticClass:"edit-form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"父亲："}},[e._v(" "+e._s(e.father&&e.father.givenName||"无")+" ")]),r("el-divider",{attrs:{"content-position":"center"}},[e._v("表单信息")]),r("el-form-item",{attrs:{label:"代",prop:"g"}},[r("el-input",{attrs:{disabled:!!e.form.parentId||!!e.form.id},model:{value:e.form.generation,callback:function(t){e.$set(e.form,"generation",e._n(t))},expression:"form.generation"}})],1),r("el-form-item",{attrs:{label:"名",prop:"givenName"}},[r("el-input",{model:{value:e.form.givenName,callback:function(t){e.$set(e.form,"givenName",t)},expression:"form.givenName"}})],1),r("el-form-item",{attrs:{label:"生卒"}},[r("el-input",{model:{value:e.form.bad,callback:function(t){e.$set(e.form,"bad",t)},expression:"form.bad"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo",t)},expression:"form.memo"}})],1),r("el-form-item",{attrs:{label:"妻"}},[r("el-table",{staticClass:"wives",attrs:{data:e.form.wives,fit:"",border:""}},[r("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"}}),r("el-table-column",{attrs:{prop:"date",label:"姓名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"wives."+t.$index+".fullName",rules:{required:!0,message:"姓名不能为空",trigger:"blur"}}},[r("el-input",{model:{value:t.row.fullName,callback:function(r){e.$set(t.row,"fullName",r)},expression:"scope.row.fullName"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"from",label:"来自",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",[r("el-input",{model:{value:t.row.from,callback:function(r){e.$set(t.row,"from",r)},expression:"scope.row.from"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"memo",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",[r("el-input",{model:{value:t.row.memo,callback:function(r){e.$set(t.row,"memo",r)},expression:"scope.row.memo"}})],1)]}}])}),r("el-table-column",{attrs:{label:"操作",width:"114"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.$index,"wives")}}}),r("el-button",{staticClass:"move",attrs:{circle:"",icon:"el-icon-plus"},on:{click:function(r){return e.addWife(t.$index+1)}}})]}}])})],1),r("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addWife}},[e._v("添加")])],1),r("el-form-item",{attrs:{label:"女"}},[r("el-table",{staticClass:"daughters",attrs:{data:e.form.daughters,fit:"",border:""}},[r("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),r("el-table-column",{attrs:{prop:"date",label:"名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"daughters."+t.$index+".givenName",rules:{required:!0,message:"名字不能为空",trigger:"blur"}}},[r("el-input",{model:{value:t.row.givenName,callback:function(r){e.$set(t.row,"givenName",r)},expression:"scope.row.givenName"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"married",label:"嫁与",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",[r("el-input",{model:{value:t.row.married,callback:function(r){e.$set(t.row,"married",r)},expression:"scope.row.married"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"memo",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",[r("el-input",{model:{value:t.row.memo,callback:function(r){e.$set(t.row,"memo",r)},expression:"scope.row.memo"}})],1)]}}])}),r("el-table-column",{attrs:{label:"操作",width:"114"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.$index,"daughters")}}}),r("el-button",{staticClass:"move",attrs:{circle:"",icon:"el-icon-plus"},on:{click:function(r){return e.addDaughter(t.$index+1)}}})]}}])})],1),r("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addDaughter}},[e._v("添加")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),r("el-button",{on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)},o=[],a=r("5530"),i=(r("a9e3"),r("a434"),r("ad8f")),l={data:function(){return{form:{givenName:"",generation:17,bad:"",parentId:null,memo:"",daughters:[],wives:[]},father:{},formRules:{givenName:[{required:!0,message:"请输入名",trigger:"blur"},{max:3,message:"长度小于等于3个字符",trigger:"blur"}]}}},computed:{isEdit:function(){return!!this.$route.query.id}},mounted:function(){var e=this.$route.query,t=e.id,r=e.parentId,n=e.generation,o=e.givenName;t?this.getItem(t):r&&(this.father.givenName=o,this.createInit(r,n))},methods:{getItem:function(e){var t=this;Object(i["b"])({id:e}).then((function(e){t.father=e.result.father,delete e.result.father,t.form=e.result}))},createInit:function(e,t){this.form=Object(a["a"])(Object(a["a"])({},this.form),{},{parentId:e,generation:t+1})},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e)return t.isEdit?t.handleUpdate():t.handleCreate();t.$message({message:"表单校验不通过!",type:"error"})}))},handleCreate:function(){var e=this;Object(i["a"])(this.form).then((function(t){e.$message({message:"添加成功!",type:"success"}),e.goBack()}))},handleUpdate:function(){var e=this;Object(i["f"])(this.form).then((function(t){e.$message({message:"更新成功!",type:"success"}),e.goBack()}))},goBack:function(){this.$router.go(-1)},addWife:function(e){var t=Number(e)||this.form.wives.length;this.form.wives.splice(t,0,{fullName:"",from:"",memo:""})},addDaughter:function(e){var t=Number(e)||this.form.daughters.length;this.form.daughters.splice(t,0,{givenName:"",married:"",memo:""})},handleDelete:function(e,t){this.form[t].splice(e,1)}}},s=l,u=(r("9fa4"),r("2877")),c=Object(u["a"])(s,n,o,!1,null,"4f9a430c",null);t["default"]=c.exports},"9fa4":function(e,t,r){"use strict";r("dff8")},a434:function(e,t,r){"use strict";var n=r("23e7"),o=r("23cb"),a=r("a691"),i=r("50c4"),l=r("7b0b"),s=r("65f0"),u=r("8418"),c=r("1dde"),f=r("ae40"),m=c("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!d},{splice:function(e,t){var r,n,c,f,m,d,v=l(this),w=i(v.length),N=o(e,w),k=arguments.length;if(0===k?r=n=0:1===k?(r=0,n=w-N):(r=k-2,n=b(p(a(t),0),w-N)),w+r-n>h)throw TypeError(g);for(c=s(v,n),f=0;f<n;f++)m=N+f,m in v&&u(c,f,v[m]);if(c.length=n,r<n){for(f=N;f<w-n;f++)m=f+n,d=f+r,m in v?v[d]=v[m]:delete v[d];for(f=w;f>w-n+r;f--)delete v[f-1]}else if(r>n)for(f=w-n;f>N;f--)m=f+n-1,d=f+r-1,m in v?v[d]=v[m]:delete v[d];for(f=0;f<r;f++)v[f+N]=arguments[f+2];return v.length=w-n+r,c}})},a9e3:function(e,t,r){"use strict";var n=r("83ab"),o=r("da84"),a=r("94ca"),i=r("6eeb"),l=r("5135"),s=r("c6b6"),u=r("7156"),c=r("c04e"),f=r("d039"),m=r("7c73"),d=r("241c").f,p=r("06cf").f,b=r("9bf2").f,h=r("58a8").trim,g="Number",v=o[g],w=v.prototype,N=s(m(w))==g,k=function(e){var t,r,n,o,a,i,l,s,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=h(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(a=u.slice(2),i=a.length,l=0;l<i;l++)if(s=a.charCodeAt(l),s<48||s>o)return NaN;return parseInt(a,n)}return+u};if(a(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,y=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof y&&(N?f((function(){w.valueOf.call(r)})):s(r)!=g)?u(new v(k(t)),r,y):k(t)},I=n?d(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;I.length>_;_++)l(v,x=I[_])&&!l(y,x)&&b(y,x,p(v,x));y.prototype=w,w.constructor=y,i(o,g,y)}},ad8f:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return s})),r.d(t,"f",(function(){return u}));var n=r("b775");function o(e){return Object(n["a"])({url:"/list/get",method:"post",data:e})}function a(){return Object(n["a"])({url:"/list/getTree",method:"post"})}function i(e){return Object(n["a"])({url:"/item/remove",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/item/get",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/item/create",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/item/update",method:"post",data:e})}},dff8:function(e,t,r){}}]);